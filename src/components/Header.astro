<header class="responsive transparent top-nav">
  <nav class="transparent">
    <h5 class="max text-gradient bold" style="font-size: 1.5rem;">Shojin App</h5>
    <div class="space"></div>
    <button id="theme-toggle" class="circle transparent">
      <i class="material-symbols-rounded">light_mode</i>
    </button>
    <a href="https://twitter.com/search?q=%23Shojin_App" target="_blank" class="button circle transparent twitter-button">
      <img class="twitter-icon" src="/twitter-icon.svg" alt="Twitter">
    </a>
    <a href="https://github.com/Shojin-App/shojin_app" target="_blank" class="button circle transparent github-button">
      <img class="github-icon" src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png" alt="GitHub">
    </a>
  </nav>
</header>

<script>
  const themeToggle = document.getElementById('theme-toggle');
  const themeIcon = themeToggle?.querySelector('i');

  const updateIcon = () => {
    if (!themeIcon) return;
    const isDark = document.body.classList.contains('dark');
    themeIcon.textContent = isDark ? 'light_mode' : 'dark_mode';
  };

  // Initial update
  updateIcon();

  themeToggle?.addEventListener('click', () => {
    document.body.classList.toggle('dark');
    document.body.classList.toggle('light');
    const isDark = document.body.classList.contains('dark');
    localStorage.setItem('theme', isDark ? 'dark' : 'light');
    updateIcon();
  });
</script>

<style>
  .github-button {
    width: 40px;
    height: 40px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .github-icon {
    width: 20px;
    height: 20px;
    object-fit: contain;
    border-radius: 0 !important;
  }

  :global(body.dark) .github-icon {
    filter: invert(1);
  }
  :global(body.light) .github-icon {
    filter: none;
  }

  .twitter-button {
    width: 40px;
    height: 40px;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .twitter-icon {
    width: 20px;
    height: 20px;
    object-fit: contain;
    border-radius: 0 !important; /* Prevent inherited border-radius */
  }

  :global(body.dark) .twitter-icon {
    filter: brightness(0) invert(1); /* White in dark mode */
  }
  
  :global(body.light) .twitter-icon {
    filter: brightness(0); /* Black in light mode */
  }
</style>
